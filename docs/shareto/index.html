<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="manifest" href="manifest.json" crossorigin="use-credentials">
	<style>
		:root {
			font-family: sans-serif;
			margin: 2vw;
		}
	</style>
	<script>
		try {
			console.clear();
			if ('serviceWorker' in navigator && (location.protocol === "https:" || location.hostname === "localhost")) {
				window.addEventListener("load", () => {
					navigator.serviceWorker.register('sw.js')
						.then(reg => console.log("Service worker registered"))
						.catch(err => console.error(`Service Worker Error: ${err}`));
				});
			}
		} catch (e) {
			console.error(e);
		}		
	</script>
</head>

<body style="text-align: center;">
	<image src="submit.svg"></image>
	<br><br>Easily submit stories to HN from your mobile phone.
	<br><br>Use the page options to install this web app.
	<br><br>Now when you share a web page you can share it to HN.
	<br><br>Look for the icon in the list of "share&nbsp;to".
	<br><br>Using the share option by the URL may result in getting the url only. Use the side menu share option to get url and title.

	<script type="text/javascript">
		let dest = "https://news.ycombinator.com/submitlink?t=$title&u=$url";
		let search = new URLSearchParams(location.search);
		let title = search.get("name") ?? "";
		let url = search.get("description") ?? "";
		if (title || url) {
			let loc = dest.replace("$title", encodeURIComponent(title)).replace("$url", encodeURIComponent(url));
			location = loc;  
		}
	</script>

</body>

</html>