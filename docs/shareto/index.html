<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="manifest" href="manifest.json" crossorigin="use-credentials">
	<style>
		:root,
		input {
			font-size: 2vw;
			font-family: sans-serif;
			margin: 1vw;
		}

		input[type=text] {
			width: 80%;
		}

		.error {
			background-color: rgb(250, 207, 207);
		}
	</style>
	<script>
		var swk;
		try {
			console.clear();
			if ('serviceWorker' in navigator && (location.protocol === "https:" || location.hostname === "localhost")) {
				window.addEventListener("load", () => {
					navigator.serviceWorker.register('sw.js')
						.then(reg => console.log("Service worker registered"))
						.catch(err => console.error(`Service Worker Error: ${err}`));


					navigator.serviceWorker.ready.then((registration) => {
						swk = registration.active;

						navigator.serviceWorker.addEventListener("message", msg => {
							console.log("from sw", msg.data);
							document.body.innerHTML = msg.data.reply;
							document.body.style.backgroundColor = "white";
						});
					});
				});
			}
		} catch (e) {
			console.error(e);
		}		
	</script>
</head>

<body>
	Use the page options to install this web app.
	<br>Use the icon to open the app.
	<br>Now whenever you "share" a web page you can share it to HN.
	<script type="text/javascript">
		let search = new URLSearchParams(location.search);
		let title = search.get("name") ?? "";
		let url = search.get("description") ?? "";
		if (title && url) {
			location = "https://news.ycombinator.com/submitlink?t=" + encodeURIComponent(title) + "&u=" + encodeURIComponent(url);
		}
	</script>

</body>

</html>